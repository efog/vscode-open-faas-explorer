name: $(Year:yy).$(DayOfYear).vscode-open-faas-explorer.$(Build.SourceBranchName).$(Rev:rr)
trigger:
- master
pool:
  vmImage: 'ubuntu-latest'
steps:
- task: NodeTool@0
  inputs:
    versionSpec: '10.x'
  displayName: 'Install Node.js'
- task: Npm@1
  displayName: Install NPM Modules
  inputs:
    command: install
- bash: |
    node ./node_modules/vscode/bin/install
    npm run-script unittest
  displayName: Run unit tests
- task: PublishTestResults@2
  condition: succeededOrFailed()
  inputs:
    testRunner: JUnit
    testResultsFiles: '**/TEST-RESULTS.xml'
